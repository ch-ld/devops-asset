# 高级证书申请功能说明

## 功能概述

新的高级证书申请页面提供了更专业和灵活的SSL证书申请配置，参考了业界最佳实践的设计。

## 主要功能

### 1. 证书域名配置
- **多域名支持**: 可以添加多个域名到同一个证书中
- **通配符支持**: 支持 `*.example.com` 格式的通配符域名
- **域名验证**: 自动验证域名格式的正确性
- **示例域名**: 提供常用域名格式的快速添加

### 2. 验证方式选择
- **DNS直接验证**: 通过DNS记录验证域名所有权（推荐）
- **CNAME代理验证**: 通过CNAME记录代理验证
- **HTTP文件验证**: 通过HTTP文件验证域名所有权

### 3. DNS解析服务商
- **多提供商支持**: 支持阿里云、腾讯云、AWS、GoDaddy等
- **图标化显示**: 每个提供商都有专门的图标
- **搜索过滤**: 支持搜索和过滤提供商

### 4. 加密算法选择
- **RSA算法**: RSA 1024/2048/3072/4096
- **椭圆曲线**: EC 256/384
- **推荐配置**: 默认推荐RSA 2048，兼容性好

### 5. 高级配置
- **更新天数**: 证书到期前多少天自动续期
- **定时触发**: 设置每天的特定时间进行检查
- **失败通知**: 支持默认通知或自定义邮箱通知

## 使用方法

### 1. 访问高级申请页面
在证书管理页面，点击"申请证书"按钮的下拉菜单，选择"高级配置"。

### 2. 配置证书域名
1. 在域名输入框中输入域名
2. 点击"添加"按钮或按回车键
3. 可以点击示例标签快速添加常用格式
4. 点击域名标签的删除按钮可以移除域名

### 3. 选择验证方式
根据您的需求选择合适的验证方式：
- 如果您有DNS管理权限，推荐选择"DNS直接验证"
- 如果需要代理验证，选择"CNAME代理验证"
- 如果只能通过HTTP验证，选择"HTTP文件验证"

### 4. 选择DNS服务商
从下拉列表中选择您的DNS解析服务商，系统会显示相应的图标和类型。

### 5. 配置加密算法
根据您的安全需求选择合适的加密算法：
- **RSA 2048**: 推荐选择，兼容性好，安全性高
- **RSA 4096**: 最高安全性，但文件较大
- **EC 256/384**: 椭圆曲线算法，高效安全

### 6. 设置高级选项
- **更新天数**: 建议设置为35天，确保有足够时间处理续期
- **定时触发**: 建议设置为凌晨时间，避免影响业务
- **失败通知**: 可以使用默认通知或设置自定义邮箱

## 技术实现

### 前端特性
- **响应式设计**: 支持桌面和移动设备
- **实时验证**: 域名格式实时验证
- **图标组件**: 自定义DNS提供商图标组件
- **用户体验**: 流畅的交互和视觉反馈

### 后端支持
- **扩展API**: 支持新的证书申请参数
- **数据库优化**: 新增字段支持高级配置
- **验证逻辑**: 完善的参数验证和错误处理

### 数据库变更
新增字段：
- `key_type`: 密钥类型
- `challenge_type`: 验证方式
- `schedule_time`: 定时触发时间
- `notification_type`: 通知类型
- `notification_email`: 自定义通知邮箱

## 注意事项

1. **DNS权限**: 使用DNS验证需要确保有相应的DNS管理权限
2. **提供商配置**: 确保DNS提供商已正确配置API凭证
3. **域名有效性**: 确保输入的域名格式正确且可访问
4. **续期时间**: 合理设置续期天数，避免证书过期
5. **通知配置**: 确保通知邮箱地址正确，以便及时接收状态更新

## 故障排除

### 常见问题
1. **域名验证失败**: 检查DNS提供商配置和域名解析
2. **申请超时**: 检查网络连接和DNS传播时间
3. **权限错误**: 确认DNS提供商API权限配置正确

### 日志查看
系统会记录详细的申请日志，可以在证书详情页面查看具体的错误信息。

## 更新日志

### v1.0.0 (2025-08-19)
- 新增高级证书申请页面
- 支持多域名和通配符域名
- 新增多种验证方式选择
- 支持多种加密算法
- 新增定时和通知配置
- 优化用户界面和体验
